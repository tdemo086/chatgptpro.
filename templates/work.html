{% extends 'base.html' %}

{% block content %}
<section class="tasks">
    <h1>Available Tasks</h1>
    <p>Lorem ipsum tasks descriptions.</p>
    <ul>
        <li>
            Task 1: Lorem ipsum dolor sit.
            <button onclick="completeTask('task1')">Complete Task 1</button>
        </li>
        <li>
            Task 2: Lorem ipsum dolor sit.
            <button onclick="completeTask('task2')">Complete Task 2</button>
        </li>
        <li>
            Task 3: Lorem ipsum dolor sit.
            <button onclick="completeTask('task3')">Complete Task 3</button>
        </li>
        <li>
            Task 4: Lorem ipsum dolor sit.
            <button onclick="completeTask('task4')">Complete Task 4</button>
        </li>
        <li>
            Task 5: Lorem ipsum dolor sit.
            <button onclick="completeTask('task5')">Complete Task 5</button>
        </li>
    </ul>
</section>

<script>
    function completeTask(taskId) {
        fetch(`/task/${taskId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token() }}'  // Include CSRF token if you're using it
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(`Task completed! You now have ${data.points} points.`);
                // Optionally update UI or redirect user to profile page
            } else {
                alert('Error completing task.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while completing the task.');
        });
    }
</script>
{% endblock %}

